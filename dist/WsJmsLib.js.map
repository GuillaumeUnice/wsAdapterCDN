{"version":3,"sources":["webpack:///webpack/bootstrap 6a38d5926994abd773b5","webpack:///./src/index.ts","webpack:///./src/WsJMSLib.ts"],"names":[],"mappings":"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","file":"WsJmsLib.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a38d5926994abd773b5","export {wsJmsLib} from './WsJMSLib';\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/index.ts","/// <reference path=\"./wsJMSKaazing.d.ts\" />\n\nexport  class wsJmsLib {\n\n\tprivate static baseTopicUrl: string = 'topic';\n\tprivate static baseQueueUrl: string = 'queue';\n\n  public connection: any;\n  public session: any;\n  public consumers: any;\n\t//////////////////////////////////////////////////////////////////////////////////\n\tconstructor() {\n\t\tthis.connection = {};\n\t\tthis.session = {};\n\t\tthis.consumers = {};\n\t}\n\n\tprivate createDestination(name: string): Topic | Queue {\n\t\tlet reTopic = new RegExp(wsJmsLib.baseTopicUrl, 'i');\n\t\tlet reQueue = new RegExp(wsJmsLib.baseQueueUrl, 'i');\n\t\tif (name.match(reTopic)) {\n\t\t\treturn this.session.createTopic(name);\n\t\t}\n\t\telse if (name.match(reQueue)) {\n\t\t\treturn this.session.createQueue(name);\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"Destination must start with /topic/ or /queue/\");\n\t\t}\n\t}\n\n  private buildMessage (message: string): textMessage {\n    let textMessage: textMessage = this.session.createTextMessage(message);\n    return textMessage;\n  }\n\n\t//////////////////////////////////////////////////////////////////////////////////\n\n\tpublic connect(url: string, callback?: Function) {\n    let connectionFactory = new JmsConnectionFactory(url);\n\n\t\tlet that = this;\n\n\t\tlet connectionFuture = connectionFactory.createConnection(function(){\n\t\t\ttry {\n\t\t\t\tthat.connection = connectionFuture.getValue();\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\n\t\t\tthat.session = that.connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n\t\t\tthat.connection.start(function() {\n\t\t\t\tcallback();\n\t\t\t});\n\t\t});\n\t};\n\n\tpublic subscribe(channelName: string, messageListener: Function) {\n\t\t// assuming connection has already been established and started\n\t\t// ideally we need to maintain the state of the connection and throw error\n\t\t// if the controller calls subscribe before connection is established\n\t\t// or after the connection is closed\n\t\tlet topic: Topic | Queue = this.session.createTopic(channelName);\n\t\tlet consumer: Consumer = this.session.createConsumer(topic);\n\t\tthis.consumers[channelName] = consumer;\n\t\tconsumer.setMessageListener((message: MessageListener) => {\n\t\t\tmessageListener.call(this, message.getText());\n\t\t});\n\t};\n\n\n\tpublic send(message: string, topic: string, callback?: Function): void {\n\t\tlet dest: Queue | Topic = this.createDestination(topic);\n\t\tlet producer: Producer = this.session.createProducer(dest);\n    let textMessage: textMessage = this.buildMessage(message);\n\t\t\n\t\ttry {\n\t\t\tlet future: FutureException = producer.send(textMessage, function () {\n\t\t\t\t\tif (future.exception) {\n\t\t\t\t\t\t\tconsole.error(future.exception);\n\t\t\t\t\t}\n\t\t\t\t\tcallback();\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t\t\tproducer.close();\n\t}\n\n  public unsubscribe(channelName: string, callback?: Function) {\n    let consumer: Consumer = this.consumers[channelName];\n    if (consumer) {\n      delete this.consumers[channelName];\n      consumer.close(callback);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/WsJMSLib.ts"],"sourceRoot":""}